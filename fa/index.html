<!doctype html>

<html lang="fa">

<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <meta name="description" content="This blog series creates a small operating system in the Rust programming language. Each post is a small tutorial and includes all needed code.">
    <meta name="author" content="Philipp Oppermann">

    
        <link rel="canonical" href="https://os.phil-opp.com/fa/" />
    
    <link href="/css/edition-2/main.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="RSS feed for os.phil-opp.com" href="https://os.phil-opp.com/rss.xml" />

    <script>
        let theme = localStorage.getItem("theme");
        if (theme != null) {
            document.documentElement.setAttribute("data-theme", theme);
        }
    </script>

    <script async src="/js/edition-2/main.js"></script>

    <title>Writing an OS in Rust</title>
</head>

<body>
    <div class="container content">
        <header class="masthead">
            <div style="position:relative">
                <h2 class="masthead-title">
                    <a href="https://os.phil-opp.com" title="Home">Writing an OS in Rust</a>
                </h2>
                <p><small>Philipp&nbsp;Oppermann's&nbsp;blog</small></p>
                
            </div>
        </header>

        <div class="theme-switch">
            <div class="light-switch" onclick="toggle_lights()" title="Switch between light and dark theme"></div>
            <div class="light-switch-reset" onclick="clear_theme_override()" title="Clear the theme override and go back to the system theme"></div>
        </div>

        <div>
            
            <main>



<h1 style="visibility: hidden; height: 0px; margin: 0px; padding: 0px;">نوشتن یک سیستم عامل با راست</h1>
<div class="front-page-introduction right-to-left">
<p>این مجموعه بلاگ یک سیستم عامل کوچک در <a href="https://www.rust-lang.org/">زبان برنامه نویسی Rust</a> ایجاد می کند. هر پست یک آموزش کوچک است و شامل تمام کدهای مورد نیاز است ، بنابراین اگر دوست دارید می توانید آن را دنبال کنید. کد منبع نیز در <a href="https://github.com/phil-opp/blog_os">مخزن گیت‌هاب</a> مربوطه موجود است.</p>
<p>اخرین پست: 
    
    <strong><a href="/async-await/">Async/Await</a></strong>
</p>
</div>


<div></div>

<div id="bare-bones" class="post-category bare-bones">Bare Bones</div>
<div class="posts bare-bones">
    <div class="right-to-left">
        <h2 class="post-title"><a href="/fa/freestanding-rust-binary/"> یک باینری مستقل Rust</a></h2>
        <div class="post-summary">
            <p>اولین قدم برای نوشتن سیستم‌عامل، ساخت یک باینری راست (کلمه: Rust) هست که به کتابخانه استاندارد نیازمند نباشد. این باعث می‌شود تا بتوانیم کد راست را بدون سیستم‌عامل زیرین، بر روی سخت افزار <a href="https://en.wikipedia.org/wiki/Bare_machine">bare metal</a> اجرا کنیم.</p>

            <a class="read-more" href="/fa/freestanding-rust-binary/"><em>ادامه‌مطلب»</em></a></div>
    </div>

    <div class="right-to-left">
        <h2 class="post-title"><a href="/fa/minimal-rust-kernel/">یک هسته مینیمال با Rust</a></h2>
        <div class="post-summary">
            <p>در این پست ما برای معماری x86 یک هسته مینیمال ۶۴ بیتی به زبان راست می‌سازیم. با استفاده از باینری مستقل Rust از پست قبل، یک دیسک ایمیج قابل بوت می‌سازیم، که متنی را در صفحه چاپ کند.</p>

            <a class="read-more" href="/fa/minimal-rust-kernel/"><em>ادامه‌مطلب»</em></a></div>
    </div>

    <div class="right-to-left">
        <h2 class="post-title"><a href="/fa/vga-text-mode/">حالت متن VGA</a></h2>
        <div class="post-summary">
            <p><a href="https://en.wikipedia.org/wiki/VGA-compatible_text_mode">حالت متن VGA</a> یک روش ساده برای چاپ متن روی صفحه است. در این پست ، با قرار دادن همه موارد غیر ایمنی در یک ماژول جداگانه ، رابطی ایجاد می کنیم که استفاده از آن را ایمن و ساده می کند. همچنین پشتیبانی از <a href="https://doc.rust-lang.org/std/fmt/#related-macros">ماکروی فرمت‌بندی</a> راست را پیاده سازی میکنیم.</p>

            <a class="read-more" href="/fa/vga-text-mode/"><em>ادامه‌مطلب»</em></a></div>
    </div>

    <div class="right-to-left">
        <h2 class="post-title"><a href="/fa/testing/">تست کردن</a></h2>
        <div class="post-summary">
            <p>این پست به بررسی تست‌های واحد (ترجمه: unit) و یکپارچه (ترجمه: integration) در فایل‌های اجرایی ‌<code>no_std</code> می‌پردازد. ما از پشتیبانی Rust برای فریم‌ورک تست‌های سفارشی استفاده می‌کنیم تا توابع تست را درون کرنل‌مان اجرا کنیم. برای گزارش کردن نتایج خارج از QEMU، از ویژگی‌های مختلف QEMU و ابزار <code>bootimage</code> استفاده می‌کنیم.</p>

            <a class="read-more" href="/fa/testing/"><em>ادامه‌مطلب»</em></a></div>
    </div>
</div>

<div id="interrupts" class="post-category interrupts">Interrupts</div>
<div class="posts interrupts">
    <div class="right-to-left">
        <h2 class="post-title"><a href="/fa/cpu-exceptions/">استثناهای پردازنده</a></h2>
        <div class="post-summary">
            <p>استثناهای پردازنده در موقعیت های مختلف دارای خطا رخ می دهد ، به عنوان مثال هنگام دسترسی به آدرس حافظه نامعتبر یا تقسیم بر صفر. برای واکنش به آنها ، باید یک <em>جدول توصیف کننده وقفه</em> تنظیم کنیم که توابع کنترل کننده را فراهم کند. در انتهای این پست ، هسته ما قادر به گرفتن <a href="https://wiki.osdev.org/Exceptions#Breakpoint">استثناهای breakpoint</a> و ادامه اجرای طبیعی پس از آن خواهد بود.</p>

            <a class="read-more" href="/fa/cpu-exceptions/"><em>ادامه‌مطلب»</em></a></div>
    </div>

    <div class="right-to-left">
        <h2 class="post-title"><a href="/fa/double-fault-exceptions/">خطاهای دوگانه</a></h2>
        <div class="post-summary">
            <p>این پست به طور دقیق جزئیات استثنای خطای دوگانه (ترجمه: double fault exception) را بررسی می‌کند، این استثنا هنگامی رخ می‌دهد که CPU نتواند یک کنترل کننده استثنا را فراخوانی کند. با کنترل این استثنا، از بروز <em>خطاهای سه گانه</em> (ترجمه: triple faults) کشنده که باعث ریست (کلمه: reset) شدن سیستم می‌شوند، جلوگیری می‌کنیم. برای جلوگیری از خطاهای سه گانه در همه موارد، ما همچنین یک <em>Interrupt Stack Table</em> را تنظیم کرده‌ایم تا خطاهای دوگانه را روی یک پشته هسته جداگانه بگیرد.</p>

            <a class="read-more" href="/fa/double-fault-exceptions/"><em>ادامه‌مطلب»</em></a></div>
    </div>

    <div class="right-to-left">
        <h2 class="post-title"><a href="/fa/hardware-interrupts/">وقفه‌های سخت‌افزاری</a></h2>
        <div class="post-summary">
            <p>در این پست ما کنترل کننده قابل برنامه ریزی وقفه را تنظیم می کنیم تا وقفه های سخت افزاری را به درستی به پردازنده منتقل کند. برای مدیریت این وقفه‌ها ، موارد جدیدی به جدول توصیف کننده وقفه اضافه می کنیم ، دقیقاً مانند کارهایی که برای کنترل کننده های استثنا انجام دادیم. ما یاد خواهیم گرفت که چگونه وقفه های متناوب تایمر را گرفته و چگونه از صفحه کلید ورودی بگیریم.</p>

            <a class="read-more" href="/fa/hardware-interrupts/"><em>ادامه‌مطلب»</em></a></div>
    </div>
</div>

<div id="memory-management" class="post-category memory-management">Memory Management</div>
<div class="posts memory-management">
    <div class="right-to-left">
        <h2 class="post-title"><a href="/fa/paging-introduction/">مقدمه‌ای بر صفحه‌بندی</a></h2>
        <div class="post-summary">
            <p>در این پست <em>صفحه‌بندی</em>، یک طرح مدیریت حافظه بسیار رایج که ما نیز برای سیستم‌عامل خود استفاده خواهیم کرد، معرفی می‌شود. این پست توضیح می‌دهد که چرا ایزوله سازی حافظه مورد نیاز است، قطعه‌بندی چگونه کار می‌کند، <em>حافظه مجازی</em> چیست و چگونه صفحه‌بندی مشکلات تقسیم حافظه را حل می کند. همچنین طرح جدول‌های صفحه چند سطحی را در معماری x86_64 بررسی می‌کند.</p>

            <a class="read-more" href="/fa/paging-introduction/"><em>ادامه‌مطلب»</em></a></div>
    </div>

    <div>
        <h2 class="post-title"><a href="/paging-implementation/">Paging Implementation</a></h2>
        <div class="post-summary">
            <p>This post shows how to implement paging support in our kernel. It first explores different techniques to make the physical page table frames accessible to the kernel and discusses their respective advantages and drawbacks. It then implements an address translation function and a function to create a new mapping.</p>

            <a class="read-more" href="/paging-implementation/"><em>ادامه‌مطلب»</em></a><aside class="no-translation">
                (.این پست هنوز ترجمه نشده است)
            </aside></div>
    </div>

    <div>
        <h2 class="post-title"><a href="/heap-allocation/">Heap Allocation</a></h2>
        <div class="post-summary">
            <p>This post adds support for heap allocation to our kernel. First, it gives an introduction to dynamic memory and shows how the borrow checker prevents common allocation errors. It then implements the basic allocation interface of Rust, creates a heap memory region, and sets up an allocator crate. At the end of this post all the allocation and collection types of the built-in <code>alloc</code> crate will be available to our kernel.</p>

            <a class="read-more" href="/heap-allocation/"><em>ادامه‌مطلب»</em></a><aside class="no-translation">
                (.این پست هنوز ترجمه نشده است)
            </aside></div>
    </div>

    <div>
        <h2 class="post-title"><a href="/allocator-designs/">Allocator Designs</a></h2>
        <div class="post-summary">
            <p>This post explains how to implement heap allocators from scratch. It presents and discusses different allocator designs, including bump allocation, linked list allocation, and fixed-size block allocation. For each of the three designs, we will create a basic implementation that can be used for our kernel.</p>

            <a class="read-more" href="/allocator-designs/"><em>ادامه‌مطلب»</em></a><aside class="no-translation">
                (.این پست هنوز ترجمه نشده است)
            </aside></div>
    </div>
</div>

<div id="multitasking" class="post-category multitasking">Multitasking</div>
<div class="posts multitasking">
    <div>
        <h2 class="post-title"><a href="/async-await/">Async&#x2F;Await</a></h2>
        <div class="post-summary">
            <p>In this post we explore <em>cooperative multitasking</em> and the <em>async/await</em> feature of Rust. We take a detailed look how async/await works in Rust, including the design of the <code>Future</code> trait, the state machine transformation, and <em>pinning</em>. We then add basic support for async/await to our kernel by creating an asynchronous keyboard task and a basic executor.</p>

            <a class="read-more" href="/async-await/"><em>ادامه‌مطلب»</em></a><aside class="no-translation">
                (.این پست هنوز ترجمه نشده است)
            </aside></div>
    </div>
</div>

<div class="posts subscribe">
    <h2 class="post-title">Subscribe</h2>
    <p>Receive notifications about new posts and other major changes! You can either:</p>

    <ul>
        <li>Subscribe to our <a href="/rss.xml">RSS/Atom Feed</a>,</li>
        <li>Subscribe to <a href="https://github.com/phil-opp/blog_os/issues/479">this GitHub issue</a>, or</li>
        <li>Subscribe to our <a href="https://tinyletter.com/phil-opp/">email newsletter</a>.</li>
    </ul>
</div>

<hr>

<div class="frontpage-section">
    <h2>Status Updates</h2>
    
    <p>These posts give a regular overview of the most important changes to the blog and the tools and libraries behind the scenes.</p>
    <ul>
          <li><b><a href="https://rust-osdev.com/this-month/2022-03/">This Month in Rust OSDev (March 2022)</a> </b></li>
  <li><b><a href="https://rust-osdev.com/this-month/2022-02/">This Month in Rust OSDev (February 2022)</a> </b></li>
  <li><b><a href="https://rust-osdev.com/this-month/2022-01/">This Month in Rust OSDev (January 2022)</a> </b></li>
  <li><b><a href="https://rust-osdev.com/this-month/2021-12/">This Month in Rust OSDev (December 2021)</a> </b></li>
  <li><b><a href="https://rust-osdev.com/this-month/2021-11/">This Month in Rust OSDev (November 2021)</a> </b></li>

        <li><a href="https://os.phil-opp.com/status-update/"><em>view all »</em></a></li>
    </ul>
</div>

<div class="frontpage-section">
    <h2 class="post-title">First Edition</h2>
    <p>You are currently viewing the second edition of “Writing an OS in Rust”. The first edition is very different in many aspects, for example it builds upon the GRUB bootloader instead of using the `bootloader` crate. In case you're interested in it, it is still available. Note that the first edition is no longer updated and might contain outdated information. <a class="read-more" href="https://os.phil-opp.com/edition-1"><em>read&nbsp;the&nbsp;first edition&nbsp;»</em></a></p>
</div>

<div class="">
    <h2>Support Me</h2>
    
<p>
    Creating and <a href="https://os.phil-opp.com/status-update/">maintaining</a> this blog and the associated libraries is a lot of work, but I really enjoy doing it. By supporting me, you allow me to invest more time in new content, new features, and continuous maintenance.
</p>
<p>
    The best way to support me is to <a href="https://github.com/sponsors/phil-opp"><em>sponsor me on GitHub</em></a>, since they don't charge any fees. If you prefer other platforms, I also have <a href="https://www.patreon.com/phil_opp"><em>Patreon</em></a> and <a href="https://donorbox.org/phil-opp"><em>Donorbox</em></a> accounts. The latter is the most flexible as it supports multiple currencies and one-time contributions.
</p>
<p>
    Thank you!
</p>

</div>
</main>
        </div>

        <div>
<aside class="page-aside-right">
    <div class="block" id="language-selector">
        <h2>Other Languages</h2>
        
        <ul><li data-lang-switch-to="en" class=""><a href="https://os.phil-opp.com/">
                    English (original)
                </a></li><li data-lang-switch-to="zh-CN" class=""><a href="https://os.phil-opp.com/zh-CN/">
                    Chinese (simplified)
                </a></li><li data-lang-switch-to="zh-TW" class=""><a href="https://os.phil-opp.com/zh-TW/">
                    Chinese (traditional)
                </a></li><li data-lang-switch-to="fr" class=""><a href="https://os.phil-opp.com/fr/">
                    French
                </a></li><li data-lang-switch-to="ja" class=""><a href="https://os.phil-opp.com/ja/">
                    Japanese
                </a></li><li data-lang-switch-to="ru" class=""><a href="https://os.phil-opp.com/ru/">
                    Russian
                </a></li><li data-lang-switch-to="ko" class=""><a href="https://os.phil-opp.com/ko/">
                    Korean
                </a></li></ul>
    </div>
    <div class="block">
        <h2>Recent Updates</h2>
        No notable updates recently.
    </div>

    <div class="block">
        <h2>Repository</h2>
        <div class="gh-repo-box">
            <div>
                <svg viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
                <a href="https://github.com/phil-opp/blog_os" class="repo-link">
                    <span title="blog_os">phil-opp/blog_os</span>
                </a>
            </div>

            <p class="subtitle">
                Writing an OS in Rust
            </p>

            <p class="stars-forks">
                <a href="https://github.com/phil-opp/blog_os/stargazers" class="stars">
                    <svg aria-label="stars" viewBox="0 0 14 16" version="1.1" width="14" height="16" role="img"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>
                    9.7k
                </a>
                <a href="https://github.com/phil-opp/blog_os/network/members" class="forks">
                    <svg aria-label="forks" viewBox="0 0 10 16" version="1.1" width="10" height="16" role="img"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
                    730
                </a>

                <a href="https://github.com/sponsors/phil-opp" class="sponsor">
                    <svg viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9 2c-.97 0-1.69.42-2.2 1-.51.58-.78.92-.8 1-.02-.08-.28-.42-.8-1-.52-.58-1.17-1-2.2-1-1.632.086-2.954 1.333-3 3 0 .52.09 1.52.67 2.67C1.25 8.82 3.01 10.61 6 13c2.98-2.39 4.77-4.17 5.34-5.33C11.91 6.51 12 5.5 12 5c-.047-1.69-1.342-2.913-3-3z"></path></svg>
                    Sponsor
                </a>
            </p>
        </div>
    </div>
</aside>

</div>

        <footer class="footer">
            <hr>
            <small>
                &copy; <time datetime="2022">2022</time>. All rights reserved.
                <a class="spaced" href="https://github.com/phil-opp/blog_os#license">License</a>
                <a class="spaced" href="https://os.phil-opp.com/contact/">Contact</a>
            </small>
        </footer>
    </div>

    <script data-goatcounter="https://phil-opp.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>

</html>
